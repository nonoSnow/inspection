<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>任务详情-待巡点-正常</title>
    <link rel="stylesheet" type="text/css" href="../../../public/css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../../public/css/aui.css" />

    <link rel="stylesheet" type="text/css" href="../../css/public.css">
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <link rel="stylesheet" type="text/css" href="../../css/taskInfoSubmit.css">
</head>

<body>
    <div class="flex-wrap flex-vertical height100">
        <header class="aui-bar aui-bar-nav aui-bar-light bgi-none header-box-shadow" id="header">
            <div class='aui-pull-left aui-btn' tapmode onclick="onBack()">
                <span class='aui-iconfont aui-icon-left'></span>
            </div>
            <div class="aui-title">设备详情</div>
            <a class='aui-pull-right color-333' tapmode onclick="onOpenInspectionRecord()">
                <span>巡检记录</span>
            </a>
        </header>

        <div class="flex-con flex-content height100 bgc-f3 margin-bot250">
            <ul class="aui-content-padded line-height1 font-S75">
                <li class="padding75 bgc-ff border-radius4" id="devInfo">
                    <!-- <div class="inline-block color-666">基础信息</div>
                    <div class="line margin-top6 margin-bot6"></div>
                    <div>名称：阀门</div>
                    <div class="margin-top75">编号：2089882848575756</div>
                    <div class="margin-top75">坐标：116.556663,39.975432</div>
                    <div class="margin-top75">
                        状态：
                        <span class='inline-block task-status-circular bgc-war margin-right3'></span> 待巡检
                    </div>
                    <div class="margin-top75 detail">巡检人：李四</div>
                    <div class="margin-top75 detail leader">联系电话：15087694326</div>
                    <div class="margin-top75 detail">巡检时间：2020-08-23 09:21:35</div>
                    <div class="margin-top75">地址：南京市溧水区交通路阳光小区98号</div> -->
                </li>

                <li class="padding75 bgc-ff border-radius4 margin-top75" id="devInfoBox">
                    <!-- <div class="inline-block color-666">巡检信息</div>
                    <div class="line margin-top6 margin-bot6"></div>
                    <div>
                        设备点状态：
                        <span class='inline-block task-status-circular bgc-blue margin-right3 detail'></span> 正常
                    </div>
                    <div class="margin-top75 abnormal">异常类型：外观破损</div>
                    <div class="margin-top75 abnormal">事件类型：巡检事件</div>
                    <div class="margin-top75 abnormal">预估漏损量：100m³</div>
                    <div class="margin-top12 color-666">巡检内容</div>
                    <div class="margin-top75 bgc-f3 border-radius2 padding75 height6">
                        <textarea name="name" class='width100 height100' placeholder="请填写巡检内容"></textarea>
                    </div>
                    <div class="margin-top12 color-666">上传附件</div>
                    <div class="margin-top75 file-div">
                        <img src="../../image/camera.png" class="margin-top75 margin-bot3 file-img" alt="">
                        <span class="file-text">上传照片</span>
                    </div> -->
                </li>
            </ul>
            <div id="haveNothing" class="text-cent aui-hide">
              <img class="margin-top200" src="../../image/nothing.png" alt="">
              <div class="text-cent color-666 line-height25">暂无内容</div>
            </div>
        </div>

        <!-- 办理界面显示 -->
        <footer id="fotSubmit" class="aui-bar aui-bar-tab display-flex footer">
            <div class="flex1">
                <div class='footer-btn bgc-blue color-fff' onclick="submit()">
                    提交
                </div>
            </div>
        </footer>

        <!-- 普通详情界面显示 -->
        <footer id="fotDetail" class="aui-bar aui-bar-tab display-flex footer">
            <div class="flex1">
                <div class='footer-btn btn-border' onclick="onOpenViewMap()">
                    查看地图
                </div>
            </div>
        </footer>

        <!-- 领导详情界面显示 -->
        <footer id="fotLeader" class="aui-bar aui-bar-tab display-flex footer">
            <div class="flex1">
                <div class='footer-btn btn-border' tapmode onclick="onBack()">
                    关闭
                </div>
            </div>
            <div class="flex1">
                <div class='footer-btn btn-border' onclick="onOpenViewMap()">
                    查看地图
                </div>
            </div>
            <div class="flex1">
                <div class='footer-btn bgc-blue color-fff' tapmode onclick="onTransferJob()">
                    转工单
                </div>
            </div>
        </footer>
    </div>
</body>
<script type="text/javascript" src="../../../public/script/api.js"></script>
<script type="text/javascript" src="../../../public/script/common.js"></script>
<script type="text/javascript" src="../../../public/script/remote.js"></script>
<script type="text/javascript" src="../../../public/script/zepto.js"></script>
<script type="text/javascript" src="../../../public/script/aui-dialog.js"></script>
<script type="text/javascript" src="../../../public/script/template.js"></script>
<script type="text/javascript" src="../../../public/script/moment.js"></script>

<script type="text/javascript" src="../../script/common/common.js"></script>
<script type="text/javascript" src="../../ajax/ajaxApi.js"></script>
<script type="text/javascript" src="../../ajax/ajaxMethod.js"></script>
<script type="text/javascript" src="../../ajax/publicAjax.js"></script>
<script type="text/javascript" src="../../script/public.js"></script>
<script type="text/javascript" src="../../ajax/taskAjax.js"></script>
<script type="text/javascript" src="../../script/taskInfoSubmit.js"></script>
<script type="text/template" id='devBasicInfo'>
  <!-- 基础信息 -->
  <div class="inline-block color-666">基础信息</div>
  <div class="line margin-top6 margin-bot6"></div>
  <div>名称：{{name}}</div>
  <div class="margin-top75">编号：{{code}}</div>
  <div class="margin-top75">坐标：{{point}}</div>
  <div class="margin-top75">
      状态：
      {{if inspectionStatus == 1}}
      <span class='inline-block task-status-circular bgc-war margin-right3'></span>
      {{else if inspectionStatus == 2}}
      <span class='inline-block task-status-circular bgc-blue margin-right3'></span>
      {{/if}}
      {{inspectionStatusStr}}
  </div>
  <div class="margin-top75 detail">巡检人：{{person}}</div>
  <div class="margin-top75 detail leader">联系电话：
    {{if phone != null}}
    {{phone}}
    {{else}}
    {{/if}}
  </div>
  <div class="margin-top75 detail">巡检时间：{{time}}</div>
  <div class="margin-top75">地址：{{address}}</div>
</script>

<script type="text/template" id='devceInfo'>
  <!-- 内容 -->
  <div class="inline-block color-666">巡检信息</div>
  <div class="line margin-top6 margin-bot6"></div>
  <div>
      设备点状态：
      {{if type == 'handle'}}
      正常
      {{else}}
      {{if status == 2}}
      <span class='inline-block task-status-circular bgc-blue margin-right3 detail'></span> 正常
      {{else if status == 3}}
      <span class='inline-block task-status-circular bgc-dan margin-right3 detail'></span> 异常
      {{/if}}
      {{/if}}
  </div>
  <div class="margin-top75 abnormal">异常类型：{{errorType}}</div>
  <div class="margin-top75 abnormal">事件类型：{{eventTypeStr}}</div>
  <div class="margin-top75 abnormal">预估漏损量：{{predictWaterLoss}}m³</div>
  <div class="margin-top12 color-666">巡检内容</div>
  <div class="margin-top75 bgc-f3 border-radius2 padding75 height6">
    {{if type == 'handle'}}
    <textarea id="content" name="name" class='width100 height100' placeholder="请填写巡检内容"></textarea>
    {{else}}
    <textarea readonly name="name" class='width100 height100'>{{content}}</textarea>
    {{/if}}
  </div>
  {{if type == 'handle'}}
  <div class="margin-top12 color-666">上传附件</div>
  <!-- <div class="margin-top75 file-div">
      <img src="../../image/camera.png" class="margin-top75 margin-bot3 file-img" alt="">
      <span class="file-text">上传照片</span>
  </div> -->
  <div id="imgBox" class="img-list">
  </div>
  {{else}}
  <div class="margin-top12 color-666">附件信息</div>
  <div id="imgBox" class="img-list">
  </div>
  {{/if}}
</script>

<script type="text/template" id='imgData'>
  <!-- 上传附件信息或者展现附件信息 -->
  {{each list value i}}
  <div class="margin-top75 file-div relative margin-right3" onclick="previewImg(this)" parse="{{url}}{{value.url}}">
    <img src="{{url}}{{value.url}}" class="width100 height100" alt="">
    {{if type == 'handle'}}
    <div class="absolute top0 right0 del-icon" tapmode onclick="deleteImg(this)" parse="{{i}}">
      <img class="width100 height100 borra" src="../../image/del.png" alt="">
    </div>
    {{/if}}
  </div>
  {{/each}}
  {{if type == 'handle'}}
  <div class="margin-top75 file-div relative" tapmode onclick="action()">
    <div class="file-img absolute top06 left15">
      <img src="../../image/camera.png" class="camera-img" alt="">
    </div>
    <div class="absolute top21 text-cent file-text width100">
      上传照片
    </div>
  </div>
  {{/if}}
</script>

</html>
